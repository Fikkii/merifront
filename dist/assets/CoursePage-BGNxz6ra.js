import{f as p,_ as y}from"./Modal-Dy5czO8O.js";import{f as x}from"./style-DEqyK-Mr.js";import{d as n,c as m,o as c,a as u,g,b as v,u as k,k as B,j as E,s as R,w as $,n as z,i as h}from"./index-DB3DdxWr.js";const I={class:"max-w-lg w-full mx-auto px-4 py-6"},S={key:0,class:"relative w-full"},T={__name:"ImageCropper",setup(b,{expose:f}){const t=n(null),e=n(null),d=s=>{const a=s.target.files[0];if(a&&a.type.startsWith("image/")){const r=new FileReader;r.onload=i=>{t.value=i.target.result},r.readAsDataURL(a)}};return f({getCroppedImage:async()=>{var a;const s=(a=e.value)==null?void 0:a.getResult();if(s!=null&&s.canvas)return await new Promise(i=>s.canvas.toBlob(i,"image/jpeg",.9))}}),(s,a)=>(c(),m("div",I,[u("input",{type:"file",accept:"image/*",onChange:d,class:"mb-4 block w-full border rounded p-2 text-sm"},null,32),t.value?(c(),m("div",S,[v(k(x),{ref_key:"cropper",ref:e,src:t.value,class:"w-full h-[400px] sm:h-[500px] rounded shadow-md overflow-hidden","stencil-props":{aspectRatio:16/9,movable:!0,scalable:!1,resizable:!0},"auto-zoom":!0,"resize-image":{adjustStencil:!0},transitions:!0,"background-class":"bg-white"},null,8,["src"])])):g("",!0)]))}},j={key:0,class:"mb-4"},V={__name:"CoursePage",props:{dashboard:{type:Boolean,default:!1}},setup(b){const f=b,t=n([]),e=n(!1),d=n(null);B(async()=>t.value=await p());async function _(l){h.delete(`/api/admin/courses/${l}`),t.value=await p()}async function s(){t.value=await p()}const a=n([{name:"title",placeholder:"Enter Course Title",type:"text",res:""},{name:"price",placeholder:"Enter Course Pricing",type:"number",res:""},{name:"description",placeholder:"Enter Course Description",type:"text",res:""}]);async function r(l){const o=await d.value.getCroppedImage();l.append("image",o,"cropped-img"),h.post("/api/admin/courses",l,{headers:{"Content-Type":"multipart/form-data"}}),e.value=!e.value,t.value=await p()}function i(l,o){a.value[l].res=o}function C(){e.value=!1}return(l,o)=>{const w=E("Table");return c(),m("div",null,[u("div",null,[e.value?(c(),R(y,{key:0,fields:a.value,onUpdate:i,onClose:C,onSubmit:r},{default:$(()=>[v(T,{ref_key:"imageRef",ref:d},null,512)]),_:1},8,["fields"])):g("",!0)]),u("div",{class:z([e.value?"blur":""])},[o[1]||(o[1]=u("h3",{class:"text-xl mb-3"},"Course Management",-1)),f.dashboard?g("",!0):(c(),m("div",j,[u("button",{onClick:o[0]||(o[0]=D=>e.value=!e.value),class:"bg-blue-500 py-2 text-white block col-start-2 ms-auto w-[200px] rounded"},"Add course")])),v(w,{onDelete:_,onEdit:s,items:t.value},null,8,["items"])],2)])}}};export{V as default};
