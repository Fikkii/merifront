import{r as a,y as M,h as _,i as n,g as w,c as v,o as u,a as l,l as k,b as x,w as E,m as S,F as U,j as B,t as D,E as T,e as V,n as z}from"./index-CJptmEd0.js";import{M as F}from"./Modal-CqpnF6AG.js";const N={class:"mt-3"},I=["value"],L={__name:"ModulePage",setup($){a([]);const c=a([]),f=a([]);a([]);const d=a([]),o=a(!1),i=M();_(()=>{m(),p()});const r=a([{name:"title",placeholder:"Enter module Title",res:""},{name:"order",placeholder:"Enter module Order",res:""}]);async function p(){try{const e=await n.get("/api/courses");if(e.status==200){const t=e.data;f.value=t}}catch(e){console.error("Caught error:",e)}}function b(e){n.delete(`/api/admin/modules/${e}`),m()}async function m(){try{const e=await n.get("/api/modules");if(e.status==200){const t=e.data;c.value=t,console.log(c.value)}}catch(e){console.error("Caught error:",e)}}function g(e,t){r.value[e].res=t}async function h(){try{if((await n.post("/api/admin/modules",{courseId:d.value,title:r.value[0].res,order:r.value[1].res})).status!==201)throw new Error("Unable to create Module");m(),o.value=!1,i.success("Module Created Successfully...")}catch{i.error("Unable to create Module...")}}function C(){o.value=!1}return(e,t)=>{const y=w("CategorizedTable");return u(),v("div",null,[l("div",null,[o.value?(u(),k(F,{key:0,fields:r.value,onUpdate:g,onClose:C,onSubmit:h},{default:E(()=>[l("div",N,[S(l("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>d.value=s),class:"p-2 border"},[(u(!0),v(U,null,B(f.value,s=>(u(),v("option",{value:s.id},D(s.title),9,I))),256))],512),[[T,d.value]])])]),_:1},8,["fields"])):x("",!0)]),l("div",{class:z([o.value?"blur":""])},[l("button",{onClick:t[1]||(t[1]=s=>o.value=!o.value),class:"bg-blue-500 py-2 text-white block col-start-2 ms-auto w-[200px] rounded"},"Add module"),V(y,{onDelete:b,items:c.value},null,8,["items"])],2)])}}};export{L as default};
