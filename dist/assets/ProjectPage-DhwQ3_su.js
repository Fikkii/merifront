import{f as _,d as l,k as f,i as r,j as C,c as d,o as c,a as s,s as w,g as k,w as P,l as S,F as T,r as B,t as D,I as E,b as I,n as M}from"./index-DB3DdxWr.js";import{_ as V}from"./Modal-Dy5czO8O.js";const F={class:"mt-3"},N=["value"],L={__name:"ProjectPage",setup(U){const p=_(),m=l([]),o=l(!1),u=l([]),v=l([]);f(()=>{g()});const n=l([{name:"title",placeholder:"Enter project Title",res:""},{name:"instructions",placeholder:"Enter project instructions",res:""}]);f(()=>{i()});async function i(){try{const e=await r.get("/api/projects");if(e.status==200){const t=e.data;m.value=t,console.log(e.data)}}catch(e){console.error("Caught error:",e)}}function b(e){r.delete(`/api/admin/projects/${e}`),i()}function y(e,t){n.value[e].res=t}async function g(){try{const e=await r.get("/api/modules");if(e.status==200){const t=e.data;v.value=t}}catch(e){console.error("Caught error:",e)}}async function j(){try{const e=r.post("/api/admin/projects",{moduleId:u.value,title:n.value[0].res,instructions:n.value[1].res});i(),o.value=!o.value,p.success("Project Created Successfully...")}catch{p.error("Unable to create Project...")}}function x(){o.value=!1}return(e,t)=>{const h=C("Table");return c(),d("div",null,[s("div",null,[o.value?(c(),w(V,{key:0,fields:n.value,onUpdate:y,onClose:x,onSubmit:j},{default:P(()=>[s("div",F,[S(s("select",{"onUpdate:modelValue":t[0]||(t[0]=a=>u.value=a),class:"p-2 border"},[(c(!0),d(T,null,B(v.value,a=>(c(),d("option",{value:a.id},D(a.module_title),9,N))),256))],512),[[E,u.value]])])]),_:1},8,["fields"])):k("",!0)]),s("div",{class:M([o.value?"blur":""])},[s("div",null,[s("button",{onClick:t[1]||(t[1]=a=>o.value=!o.value),class:"bg-blue-500 py-2 text-white block col-start-2 ms-auto w-[200px] rounded"},"Add project"),t[2]||(t[2]=s("div",{class:"flex gap-2 mt-4"},[s("input",{class:"px-4 py-2 rounded-sm flex-1",placeholder:"Enter project Title",type:"text"}),s("button",{class:"px-4 py-2 bg-yellow-500 text-white rounded"},"Search")],-1)),t[3]||(t[3]=s("select",{class:"px-4 py-2 mt-2 border rounded-sm"},[s("option",null,"Latest"),s("option",null,"Active"),s("option",null,"Inactive")],-1))]),I(h,{onDelete:b,items:m.value},null,8,["items"])],2)])}}};export{L as default};
