import{l as h,d as b,m as S,c as r,o as l,a as o,y as f,F as k,r as I,i,t as p,k as E,u as L,z as C,s as T}from"./index-Doh7Rih5.js";async function j(){try{const t=await h.get("/api/modules");if(t.status==200)return await t.data}catch(t){console.error("Caught error:",t)}}async function B(){try{const t=await h.get("/api/courses");if(t.status==200)return await t.data}catch(t){console.error("Caught error:",t)}}async function U(){try{const t=await h.get("/api/topics");if(t.status==200)return t.data}catch(t){console.error("Caught error:",t)}}const D={class:"fixed z-[2000] inset-0 bg-opacity-50 flex items-start justify-center overflow-auto py-8"},N={class:"bg-white rounded-xl w-[90%] max-w-lg shadow-2xl max-h-[600px] overflow-y-auto"},V={class:"flex justify-between items-center px-6 py-5 border-b border-gray-200"},z={class:"p-6"},$=["for"],q=["id","type","placeholder","value","onInput"],H=["id","placeholder","value","onInput"],O={key:0},P=["for"],A={key:0,class:"text-sm text-blue-500 mb-2"},G=["src"],J=["disabled","value","onInput"],K=["id","value"],Q={class:"flex justify-end gap-3 mt-6"},W={__name:"Modal",props:["fields","edit"],emits:["update","close","submit"],setup(t,{emit:c}){const u=t,m=c,g=b(!1),v=b([]),x=b([]);function y(a,s){m("update",a,s.target.value);const e=u.fields[a];e.name==="courseId"&&F(e.res)}function _(){m("close",!0)}function M(a){const s=new FormData;u.fields.forEach(e=>s.append(e.name,e.res)),a.target.innerHTML=`<img width="20" src="${C}">`,m("submit",s)}S(async()=>{v.value=await B(),x.value=await j(),u.fields.forEach(a=>{a.name==="courseId"&&(a.options=v.value),a.name==="moduleId"&&(a.options=[])})});async function F(a){g.value=!0,await new Promise(e=>setTimeout(e,300));const s=u.fields.find(e=>e.name==="moduleId");s&&(s.options=x.value.filter(e=>e.course_id==a),s.res=""),g.value=!1}return(a,s)=>(l(),r("div",D,[o("div",N,[o("div",V,[s[0]||(s[0]=o("h3",{class:"text-lg font-semibold text-gray-800"},"Form",-1)),o("button",{class:"text-gray-400 hover:text-gray-700 text-2xl font-bold",onClick:f(_,["prevent"])}," Ã— ")]),o("div",z,[o("form",null,[o("div",null,[(l(!0),r(k,null,I(u.fields,(e,d)=>{var w;return l(),r("div",{key:d,class:"mb-5"},[o("div",null,[e.type!="select"?(l(),r("label",{key:0,for:e.name,class:"block mb-2 font-medium text-gray-700"},p(e.name),9,$)):i("",!0),e.type!=="select"&&e.type!=="textarea"?(l(),r("input",{key:1,id:e.name,type:e.type||"text",placeholder:e.placeholder,value:e.res,onInput:n=>y(d,n),required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-lg bg-blue-50 focus:outline-none focus:ring-2 focus:ring-blue-500"},null,40,q)):i("",!0),e.type=="textarea"?(l(),r("textarea",{key:2,id:e.name,placeholder:e.placeholder,value:e.res,onInput:n=>y(d,n),class:"w-full px-4 py-3 border col-span-2 border-gray-300 rounded-lg bg-blue-50 focus:outline-none focus:ring-2 focus:ring-blue-500"},"                ",40,H)):i("",!0)]),e.type=="select"?(l(),r("div",O,[o("label",{for:e.name,class:"block mb-2 font-medium text-gray-700"},p(e.name),9,P),e.name==="moduleId"&&g.value?(l(),r("div",A,[o("img",{src:L(C),width:"18",class:"inline-block mr-2"},null,8,G),s[1]||(s[1]=E(" Loading modules... "))])):i("",!0),o("select",{disabled:e.name==="moduleId"&&!((w=u.fields.find(n=>n.name==="courseId"))!=null&&w.res),value:e.res,onInput:n=>y(d,n),class:"w-full px-4 py-3 border border-gray-300 rounded-lg bg-blue-50 focus:outline-none focus:ring-2 focus:ring-blue-500"},[s[2]||(s[2]=o("option",{disabled:"",value:""},"-- Select --",-1)),(l(!0),r(k,null,I(e.options,n=>(l(),r("option",{id:n.id,key:n.id,value:n.id},p(n.title),9,K))),128))],40,J)])):i("",!0)])}),128))]),o("div",null,[T(a.$slots,"default")]),o("div",Q,[o("button",{onClick:f(M,["prevent"]),class:"bg-indigo-500 text-white px-5 py-2 rounded hover:bg-indigo-600 transition"},p(t.edit?"Edit":"Submit"),1),o("button",{onClick:f(_,["prevent"]),class:"bg-gray-300 text-gray-700 px-5 py-2 rounded hover:bg-gray-400 transition"}," Cancel ")])])])])]))}};export{W as _,j as a,U as b,B as f};
