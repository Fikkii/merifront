import{d as c,f as B,m as D,l as u,c as r,o as n,i as b,a as t,t as o,F as p,r as x,k as g,p as S,v as N,n as R}from"./index-CJwAv-gi.js";const E={key:0},I={key:0,class:"w-full overflow-x-auto mt-10"},A={class:"w-full text-left border-collapse"},P={class:"border-t"},V={class:"px-4 py-2"},q={class:"border-t"},z={class:"px-4 py-2"},F={class:"border-t"},L={class:"px-4 py-2"},M={class:"border-t"},j={class:"px-4 py-2"},O={class:"border-t"},U={class:"px-4 py-2"},$={class:"border-t"},G={class:"px-4 py-2"},H={class:"border-t"},J={class:"px-4 py-2"},K={class:"border-t"},Q={class:"px-4 py-2"},W={class:"grid gap-3 md:grid-cols-3"},X={class:"shadow mt-3 bg-red-50 rounded p-3"},Y={class:"text-xl"},Z={class:"text-sm classtext-sm font-bold"},tt={class:"mt-4"},st={class:"flex gap-2"},et={class:"w-full overflow-x-auto mt-10"},at={class:"font-bold text-xl text-indigo-500 uppercase mb-3"},ot={class:"w-full text-left border-collapse"},lt={class:"px-4 py-2"},rt={class:"px-4 py-2"},nt={class:"px-4 py-2"},dt={class:"px-4 py-2"},ct={class:"px-4 py-2"},it={class:"px-4 py-2"},xt={__name:"TransactionPage",setup(ut){const y=c([]),i=c([]),_=c([]),l=c(null),f=c(!0),h=B();D(()=>{C(),w()});async function v(){try{if(!i.value)throw new Error("Reference Id is required...");const e=await u.get(`/api/admin/transaction/${i.value}`);if(e.status==200){const s=e.data;l.value=s,f.value=!0}}catch(e){h.error(e.message),console.error("Caught error:",e)}}async function w(){try{const e=await u.get("/api/admin/transactions/balance");if(e.status==200){const s=e.data;_.value=e.data}}catch(e){h.error(e.message),console.error("Caught error:",e)}}function k(e){const s={};return e.forEach(a=>{s[a.status]||(s[a.status]=[]),s[a.status].push({id:a.id,amount:a.amount,reference:a.reference,email:a.customer.email,status:a.status})}),Object.entries(s).map(([a,m])=>({category:a,transactions:m}))}async function C(){try{const e=await u.get("/api/admin/transactions");if(e.status==200){const s=e.data,a=k(s);y.value=a}}catch(e){console.error("Caught error:",e)}}return(e,s)=>(n(),r("div",null,[f.value?(n(),r("div",E,[s[9]||(s[9]=t("div",{class:"text-indigo-500 text-xl"}," Transaction Details ",-1)),l.value?(n(),r("div",I,[t("table",A,[t("tbody",null,[t("tr",P,[s[1]||(s[1]=t("td",{class:"px-4 py-2"},"Customer Id",-1)),t("td",V,o(l.value.customer.id),1)]),t("tr",q,[s[2]||(s[2]=t("td",{class:"px-4 py-2"},"Reference Number",-1)),t("td",z,o(l.value.reference),1)]),t("tr",F,[s[3]||(s[3]=t("td",{class:"px-4 py-2"},"Email",-1)),t("td",L,o(l.value.customer.email),1)]),t("tr",M,[s[4]||(s[4]=t("td",{class:"px-4 py-2"},"Requested Amount",-1)),t("td",j,o(l.value.requested_amount),1)]),t("tr",O,[s[5]||(s[5]=t("td",{class:"px-4 py-2"},"Payment Method",-1)),t("td",U,o(l.value.channel)+" ("+o(l.value.authorization.brand)+")",1)]),t("tr",$,[s[6]||(s[6]=t("td",{class:"px-4 py-2"},"Sender Bank",-1)),t("td",G,o(l.value.authorization.bank),1)]),t("tr",H,[s[7]||(s[7]=t("td",{class:"px-4 py-2"},"Transaction Date",-1)),t("td",J,o(l.value.createdAt),1)]),t("tr",K,[s[8]||(s[8]=t("td",{class:"px-4 py-2"},"Status",-1)),t("td",Q,o(l.value.status),1)])])])])):b("",!0)])):b("",!0),t("div",null,[t("div",W,[(n(!0),r(p,null,x(_.value,a=>(n(),r("div",X,[s[10]||(s[10]=t("span",{class:"text-indigo-500"},"Account Balance",-1)),t("div",Y,[t("span",Z,o(a.currency)+":",1),g(" "+o(a.balance),1)])]))),256)),s[11]||(s[11]=t("div",{class:"shadow mt-3 flex flex-col bg-red-50 col-span-2 rounded p-3"},[t("span",{class:"text-indigo-500"},"Login to Paystack"),t("a",{class:"bg-indigo-500 mt-3 p-2 text-white rounded",href:"http://www.paystack.com",target:"_blank"},[t("i",{class:"ri-external-link-line ms-4"}),g(" Login Paystack ")])],-1))]),t("div",tt,[s[12]||(s[12]=t("span",{class:"text-indigo-500"},"Search Reference Number",-1)),t("div",st,[S(t("input",{"onUpdate:modelValue":s[0]||(s[0]=a=>i.value=a),placeholder:"Enter Reference Id",class:"rounded bg-blue-100 border border-gray-300 shadow p-2 flex-1",type:"text"},null,512),[[N,i.value]]),t("button",{onClick:v,class:"p-2 md:w-30 rounded shadow-lg bg-indigo-500 text-white"},"Search")])]),(n(!0),r(p,null,x(y.value,(a,m)=>(n(),r("div",et,[t("div",at,o(a.category),1),t("table",ot,[s[13]||(s[13]=t("thead",{class:"bg-gray-100 font-semibold text-gray-700"},[t("tr",null,[t("th",{class:"px-4 py-2"},"S/N"),t("th",{class:"px-4 py-2"},"Id"),t("th",{class:"px-4 py-2"},"Ref"),t("th",{class:"px-4 py-2"},"Customer"),t("th",{class:"px-4 py-2"},"Amount"),t("th",{class:"px-4 py-2"},"Status")])],-1)),t("tbody",null,[(n(!0),r(p,null,x(a.transactions,(d,T)=>(n(),r("tr",{key:d,class:"border-t"},[t("td",lt,o(T+1),1),t("td",rt,o(d.id),1),t("td",nt,o(d.reference),1),t("td",dt,o(d.email),1),t("td",ct,o(d.amount),1),t("td",it,[t("i",{class:R([d.status==="success"?"ri-checkbox-circle-fill text-green-500":"ri-checkbox-blank-circle-fill text-red-500"])},null,2)])]))),128))])])]))),256))])]))}};export{xt as default};
