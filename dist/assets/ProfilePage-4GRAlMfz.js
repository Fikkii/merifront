import{r as a,k as x,h,i as c,c as i,o as d,b as f,a as t,t as w,m as b,v,p as k}from"./index-_9QuGeYa.js";import{_ as P}from"./loader-BZfJ8uUy.js";const U={key:0,class:"bg-green-500 p-4 m-5 text-white absolute w-[300px] top-0 right-0 rounded shadow"},V={key:1,class:"bg-red-500 p-4 m-5 text-white absolute w-[300px] top-0 right-0 rounded shadow"},B={type:"submit",class:"w-full flex gap-4 justify-center py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition"},C={key:0,width:"20",src:P,alt:"spinner"},D={__name:"ProfilePage",setup(E){const u=a(""),r=a(""),p=a(""),n=a(!1),s=a(""),m=a("");x(s,()=>{console.log("There is an error"),setTimeout(()=>{s.value=""},5e3)}),h(()=>g());async function g(){try{const l=await c.get("/api/student/me");if(l.status==200){const e=await l.data;u.value=e.email,r.value=e.fullname}else throw new Error(data.error)}catch(l){n.value=!1,s.value=l,console.error("Caught error:",l)}}async function y(){n.value=!0;try{(await c.put("/api/student/me",{fullname:r.value,email:u.value,password:p.value})).status==200&&(m.value="profile updated",g())}catch(l){n.value=!1,s.value=l,console.error("Caught error:",l)}}return(l,e)=>(d(),i("div",null,[m.value?(d(),i("div",U,w(m.value),1)):f("",!0),s.value?(d(),i("div",V,w(s.value),1)):f("",!0),t("form",{onSubmit:e[3]||(e[3]=k(o=>y(),["prevent"])),class:"space-y-4 bg-blue-50 border-blue-500 p-6 rounded-lg shadow-2xl relative"},[e[8]||(e[8]=t("span",{class:"text-lg"},"Update Profile",-1)),t("div",null,[e[4]||(e[4]=t("label",{class:"block mb-1 text-gray-700"},"Email",-1)),b(t("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>u.value=o),type:"email",class:"w-full px-4 py-2 border rounded-md bg-blue-50 focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[v,u.value]])]),t("div",null,[e[5]||(e[5]=t("label",{class:"block mb-1 text-gray-700"},"Fullname",-1)),b(t("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>r.value=o),type:"text",class:"w-full px-4 py-2 border rounded-md bg-blue-50 focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[v,r.value]])]),t("div",null,[e[6]||(e[6]=t("label",{class:"block mb-1 text-gray-700"},"Password",-1)),b(t("input",{"onUpdate:modelValue":e[2]||(e[2]=o=>p.value=o),type:"text",class:"w-full px-4 py-2 border rounded-md bg-blue-50 focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[v,p.value]])]),t("button",B,[e[7]||(e[7]=t("span",null,"Update Profile",-1)),n.value?(d(),i("img",C)):f("",!0)])],32)]))}};export{D as default};
