import{b as i,a as r,_ as y}from"./Modal-Dy5czO8O.js";import{_ as T}from"./ToastEditor-Cm_6o2Y9.js";import{d as o,f as g,k,j as x,c as j,o as f,a as l,s as B,g as E,w as $,b as m,n as z,i as _}from"./index-DB3DdxWr.js";import"./_commonjsHelpers-D6-XlEtG.js";const M={class:"relative"},N={class:"col-span-2"},I={__name:"TopicPage",setup(S){const s=o([]),n=o([]);o([]);const u=o(""),a=o(!1),d=g(),c=o(null);k(async()=>{s.value=await i(),n.value=await r()});async function b(t){_.delete(`/api/admin/topics/${t}`),s.value=await i(),n.value=await r()}const p=o([{name:"title",placeholder:"Enter topic Title",res:""},{name:"moduleId",placeholder:"Enter topic Title",res:"",type:"select",options:{}}]);function C(t,e){p.value[t].res=e}async function w(t){try{c.value&&(u.value=c.value.saveContent()),t.append("content",u.value);const e=Object.fromEntries(t),v=await _.post("/api/admin/topics",e,{headers:{"Content-Type":"application/json"}});a.value=!a.value,d.success("Topic Created Successfully...")}catch(e){console.log(e),d.error(e.response.data.error)}s.value=await i(),n.value=await r()}function h(){a.value=!1}return(t,e)=>{const v=x("CategorizedTable");return f(),j("div",M,[l("div",null,[a.value?(f(),B(y,{key:0,fields:p.value,onUpdate:C,onClose:h,onSubmit:w},{default:$(()=>[l("div",N,[m(T,{ref_key:"toastRef",ref:c},null,512)])]),_:1},8,["fields"])):E("",!0)]),l("div",{class:z([a.value?"blur":""])},[l("button",{onClick:e[0]||(e[0]=V=>a.value=!a.value),class:"bg-blue-500 py-2 text-white block col-start-2 ms-auto w-[200px] rounded"},"Add topic"),m(v,{onDelete:b,items:s.value},null,8,["items"])],2)])}}};export{I as default};
