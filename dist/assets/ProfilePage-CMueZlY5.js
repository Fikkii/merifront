import{f as h,d as s,x as k,m as P,l as y,c as d,o as p,i as g,a as l,t as w,p as m,v as c,z as U,y as T}from"./index-Doh7Rih5.js";const V={key:0,class:"bg-green-500 p-4 m-5 text-white absolute w-[300px] top-0 right-0 rounded shadow"},B={key:1,class:"bg-red-500 p-4 m-5 text-white absolute w-[300px] top-0 right-0 rounded shadow"},C={type:"submit",class:"w-full flex gap-4 justify-center py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition"},E={key:0,width:"20",src:U,alt:"spinner"},D={__name:"ProfilePage",setup(M){const f=h(),r=s(""),u=s("");s("");const n=s(""),a=s(!1),i=s(""),b=s("");k(i,()=>{console.log("There is an error"),setTimeout(()=>{i.value=""},5e3)}),P(()=>v());async function v(){try{const t=await y.get("/api/student/me");if(t.status==200){const e=await t.data;r.value=e.email,u.value=e.fullname,n.value=e.phone}else throw new Error(data.error)}catch(t){a.value=!1,f.error(t.message),console.error("Caught error:",t)}}async function x(){a.value=!0;try{(await y.put("/api/student/me",{fullname:u.value,email:r.value,phone:n.value})).status==200&&(b.value="profile updated",v(),f.success("Profile Update Successfully"))}catch(t){a.value=!1,f.error(t.message),console.error("Caught error:",t)}finally{setTimeout(()=>{a.value=!1},3e3)}}return(t,e)=>(p(),d("div",null,[b.value?(p(),d("div",V,w(b.value),1)):g("",!0),i.value?(p(),d("div",B,w(i.value),1)):g("",!0),l("form",{onSubmit:e[3]||(e[3]=T(o=>x(),["prevent"])),class:"space-y-4 bg-white border-blue-500 p-6 rounded-lg shadow-2xl relative"},[e[8]||(e[8]=l("span",{class:"text-lg"},"Update Profile",-1)),l("div",null,[e[4]||(e[4]=l("label",{class:"block mb-1 text-gray-700"},"Email",-1)),m(l("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>r.value=o),type:"email",disabled:"",class:"w-full px-4 py-3 border border-gray-300 rounded-lg bg-blue-50 focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[c,r.value]])]),l("div",null,[e[5]||(e[5]=l("label",{class:"block mb-1 text-gray-700"},"Fullname",-1)),m(l("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>u.value=o),type:"text",class:"w-full px-4 py-3 border border-gray-300 rounded-lg bg-blue-50 focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[c,u.value]])]),l("div",null,[e[6]||(e[6]=l("label",{class:"block mb-1 text-gray-700"},"Phone",-1)),m(l("input",{"onUpdate:modelValue":e[2]||(e[2]=o=>n.value=o),type:"text",class:"w-full px-4 py-3 border border-gray-300 rounded-lg bg-blue-50 focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[c,n.value]])]),l("button",C,[e[7]||(e[7]=l("span",null,"Update Profile",-1)),a.value?(p(),d("img",E)):g("",!0)])],32)]))}};export{D as default};
