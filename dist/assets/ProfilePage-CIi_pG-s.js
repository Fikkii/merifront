import{f as U,d as o,y as V,m as _,l as x,h as T,c as y,o as w,b as k,a as l,w as h,k as d,t as p,p as f,v as b,i as N,A as E,z as M}from"./index-CJwAv-gi.js";const B={class:"flex flex-wrap shadow gap-4 rounded-lg justify-between md:my-10 mb-4 p-5 md:p-10 bg-yellow-100"},D={class:"prose"},G={class:"font-bold"},L={class:"flex flex-col gap-4"},S=["href"],j={type:"submit",class:"w-full flex gap-4 justify-center py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition"},F={key:0,width:"20",src:E,alt:"spinner"},A={__name:"ProfilePage",setup(R){const i=U(),a=o(""),r=o("");o("");const n=o(""),m=o(""),u=o(!1),g=o(""),P=o("");V(g,()=>{console.log("There is an error"),setTimeout(()=>{g.value=""},5e3)}),_(()=>c());async function c(){try{const t=await x.get("/api/student/me");if(t.status==200){const e=await t.data;a.value=e.email,r.value=e.fullname,n.value=e.phone,m.value=e.group_link}else throw new Error(data.error)}catch(t){u.value=!1,i.error(t.message),console.error("Caught error:",t)}}async function C(){u.value=!0;try{(await x.put("/api/student/me",{fullname:r.value,email:a.value,phone:n.value})).status==200&&(P.value="profile updated",c(),i.success("Profile Update Successfully"))}catch(t){u.value=!1,i.error(t.message),console.error("Caught error:",t)}finally{setTimeout(()=>{u.value=!1},3e3)}}return(t,e)=>{const v=T("RouterLink");return w(),y("div",null,[k(v,{class:"text-blue-500 font-bold md:mb-5 block",to:{name:"dashboard-home"}},{default:h(()=>e[4]||(e[4]=[l("i",{class:"ri-arrow-left-line"},null,-1),d("Go back")])),_:1,__:[4]}),e[13]||(e[13]=l("div",{class:"font-bold text-xl"}," Your Profile ",-1)),l("div",B,[l("div",D,[l("div",G,"Full-Name: "+p(r.value),1),l("div",null,"Email: "+p(a.value),1),l("div",null,"Phone: "+p(n.value),1)]),l("div",L,[l("a",{class:"px-6 md:px-8 py-4 bg-blue-500 text-white rounded-sm",href:`https://${m.value}`,target:"_blank"},e[5]||(e[5]=[d("Join Dedicated Group "),l("i",{class:"ri-arrow-right-line"},null,-1)]),8,S),k(v,{class:"text-blue-500 font-bold mb-5",to:{name:"peer"}},{default:h(()=>e[6]||(e[6]=[d("Check Peer Group "),l("i",{class:"ri-arrow-right-line"},null,-1)])),_:1,__:[6]})])]),l("form",{onSubmit:e[3]||(e[3]=M(s=>C(),["prevent"])),class:"space-y-4 bg-white border-blue-500 p-6 rounded-lg shadow-2xl relative"},[e[11]||(e[11]=l("span",{class:"text-lg"},"Update Profile",-1)),l("div",null,[e[7]||(e[7]=l("label",{class:"block mb-1 text-gray-700"},"Email",-1)),f(l("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>a.value=s),type:"email",disabled:"",class:"w-full px-4 py-3 border border-gray-300 rounded-lg bg-blue-50 focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[b,a.value]])]),l("div",null,[e[8]||(e[8]=l("label",{class:"block mb-1 text-gray-700"},"Fullname",-1)),f(l("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>r.value=s),type:"text",class:"w-full px-4 py-3 border border-gray-300 rounded-lg bg-blue-50 focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[b,r.value]])]),l("div",null,[e[9]||(e[9]=l("label",{class:"block mb-1 text-gray-700"},"Phone",-1)),f(l("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>n.value=s),type:"text",class:"w-full px-4 py-3 border border-gray-300 rounded-lg bg-blue-50 focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[b,n.value]])]),l("button",j,[e[10]||(e[10]=l("span",null,"Update Profile",-1)),u.value?(w(),y("img",F)):N("",!0)]),e[12]||(e[12]=l("p",{class:"text-red-500 font-bold"},"Changes are not reflected until update is done. Make sure to click on update to retain changes",-1))],32)])}}};export{A as default};
