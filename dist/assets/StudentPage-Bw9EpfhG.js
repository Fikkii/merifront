import{_ as E}from"./Modal-DL73gfd7.js";import{f as P,d as r,m as S,l as n,h as $,c as B,o as f,a as s,j as G,i as N,b as z,w as D,k as I,n as U,z as g,L as V}from"./index-Doh7Rih5.js";const j={class:"flex"},F={__name:"StudentPage",setup(L){const i=P(),d=r([]),o=r(!1);S(()=>{u(),_()});const v=r(null),p=r(null);r([{name:"Delete",action:"delete"},{name:"Edit",action:"edit"},{name:"Update",action:"update"}]);const l=r([{name:"email",placeholder:"Enter Email",res:""},{name:"name",placeholder:"Enter Name",res:""},{name:"password",placeholder:"Enter Password",res:""}]);async function u(){try{const e=await n.get("/api/students");if(e.status==200){const t=e.data;d.value=t,console.log(e.data)}}catch(e){console.error("Caught error:",e)}}function h(e,t){l.value[e].res=t,console.log(l.value[e].res)}function b(){try{n.post("/api/auth/register",{email:l.value[0].res,name:l.value[1].res,password:l.value[2].res}),o.value=!1}catch(e){console.error(e)}}function w(){o.value=!1}async function x(e){e.currentTarget.innerHTML+=`<img class="absolute top-1 left-1 z-10" width="20" id="loader" src="${g}">`,setTimeout(()=>{const a=document.getElementById("loader");a&&a.remove()},3e3);const t=await n.post("/api/peer");if(t.data.groups){const a=t.data.groups.length;i.success(`${a} Pair Group have been created successfully`),u()}else i.error("Unable to create Pair Group, Not enough user")}async function y(e){e.currentTarget.innerHTML+=`<img class="absolute top-1 left-1 z-10" width="20" id="loader" src="${g}">`,setTimeout(()=>{const a=document.getElementById("loader");a&&a.remove()},3e3);const t=await n.delete("/api/peer");u(),t.status==201?i.success("Pair Groups have been deleted successfully"):i.error("Unable to delete Pair Group")}async function _(e=23){const t=await n.get(`/api/students/${e}`);t.status==200&&(t.data,console.log(t.data))}async function C(e){await n.delete(`/api/admin/students/${e}`),u()}async function k(e="1"){v.value=e;const t=await n.get(`/api/students/${e}`),m=Object.entries(t.data).map(([c,T])=>["id","enrollment","peer"].includes(c)?null:{name:c,placeholder:"No placeholder",type:"text",res:T}).filter(c=>c!=null);p.value=m,o.value=!0,await V(),toastRef.value.setContent(t.data.project_hint)}return(e,t)=>{const a=$("CategorizedTable");return f(),B("div",null,[s("div",null,[o.value?(f(),G(E,{key:0,fields:p.value||l.value,onUpdate:h,onClose:w,onSubmit:b},null,8,["fields"])):N("",!0)]),s("div",{class:U([o.value?"blur":""])},[z(a,{groupBy:"is_enrolled",onDelete:C,onEdit:k,items:d.value},{default:D(()=>[s("div",j,[s("div",{class:"flex flex-wrap gap-2"},[s("button",{onClick:x,class:"relative bg-green-500 py-2 text-white block col-start-2 w-[100px] rounded"},"Assign Groups"),s("button",{onClick:y,class:"relative bg-red-500 py-2 text-white block col-start-2 w-[100px] rounded"},"Delete Groups")]),s("button",{onClick:t[0]||(t[0]=m=>o.value=!o.value),class:"bg-blue-500 ms-auto py-2 text-white block col-start-2 w-[100px] rounded"},t[1]||(t[1]=[s("i",{class:"ri-add-line"},null,-1),I("Add Student")]))])]),_:1},8,["items"])],2)])}}};export{F as default};
