import{_ as p,c as l,o as a,a as t,F as S,r as j,b as n,w as m,n as L,t as R,u as h,R as N,d as b,e as g,f as $,g as P,h as w,i as _,j as V,k as u,l as D}from"./index-luTevwiG.js";import{_ as E}from"./logo-BMUeAq7L.js";const B={class:"sticky bg-white flex gap-3 items-center justify-evenly py-7 border-t shadow-2xl border-gray-500 h-7 w-screen bottom-0 left-0"},I={class:"flex items-center justify-evenly w-full"},T={class:"text-gray-500 text-sm"},z={__name:"DashNav",setup(f){const s=[{title:"Home",name:"dashboard-home",icon:"ri-home-line"},{title:"Course",name:"learning",icon:"ri-donut-chart-line"},{title:"Ebook",name:"ebooks",icon:"ri-book-shelf-line"},{title:"profile",name:"profile",icon:"ri-user-line"}];return(d,r)=>(a(),l("div",B,[t("div",I,[(a(),l(S,null,j(s,i=>n(h(N),{to:{name:i.name},class:"text-2xl flex flex-col items-center"},{default:m(()=>[t("i",{class:L([i.icon])},null,2),t("span",T,R(i.title),1)]),_:2},1032,["to"])),64))])]))}},F=p(z,[["__scopeId","data-v-e1bf2831"]]),H={class:"sticky z-999 top-0 left-0 bg-white py-3 px-4 flex justify-between relative items-center"},O={key:0,class:"bg-white translate-y-[100%] rounded shadow-2xl w-40 absolute bottom-0 right-0"},J={class:"flex rounded flex-col justify-stretch"},M={__name:"Header",setup(f){const s=b(!1),d=g(),r=$(),y=P().role,x=()=>{s.value=!s.value};function k(){localStorage.removeItem("jwt-token"),localStorage.removeItem("user-role"),d.push({name:"login"})}async function v(){try{const o=await D.get("/api/student/me");if(o.status==200)return(await o.data).email;throw r.error("Server Error, Please contact support"),new Error(data.error)}catch(o){console.error("Caught error:",o)}}async function C(){try{const o=await v(),e=await fetch("https://apigateway.merilearn.com.ng/api/auth/forgot-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:o})}),c=await e.json();if(e.ok)r.success("Password reset link sent, Check your email");else throw new Error(c.error)}catch(o){r.error(o.message)}}return(o,e)=>{const c=w("RouterLink");return a(),l("header",H,[s.value?(a(),l("div",O,[t("div",J,[h(y)!=="student"?(a(),V(c,{key:0,to:{name:"role"},class:"block w-full p-2 border-b border-gray-200"},{default:m(()=>e[0]||(e[0]=[t("i",{class:"ri-key-2-line"},null,-1),u("Switch Role")])),_:1,__:[0]})):_("",!0),t("button",{onClick:C,to:{name:"home"},class:"w-full p-2 border-b border-gray-200"},e[1]||(e[1]=[t("i",{class:"ri-key-2-line"},null,-1),u(" Change Password")])),t("button",{onClick:k,class:"w-full p-2 border-b border-gray-200"},e[2]||(e[2]=[t("i",{class:"ri-logout-box-line"},null,-1),u(" Logout")]))])])):_("",!0),n(c,{to:{name:"dashboard-home"},class:"flex flex-col items-center"},{default:m(()=>e[3]||(e[3]=[t("img",{class:"h-10 w-auto",src:E,alt:""},null,-1),u(" Merilearn ")])),_:1,__:[3]}),t("div",{class:"text-right block"},[t("button",{onClick:x},e[4]||(e[4]=[t("i",{class:"ri-menu-3-fill text-xl"},null,-1)]))])])}}},U={class:"min-h-screen max-w-screen flex flex-col bg-gray-50"},q={__name:"DashboardLayout",setup(f){return g(),b(!0),(s,d)=>{const r=w("RouterView");return a(),l("div",U,[n(M),n(r,{class:"flex-1 px-6 py-12"}),n(F,{class:"md:hidden"})])}}},K=p(q,[["__scopeId","data-v-30043ba4"]]);export{K as default};
