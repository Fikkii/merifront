import{y as C,r as l,h as f,i as r,g as w,c as d,o as c,a as o,l as _,b as k,w as M,m as P,F as S,j as E,t as T,E as B,e as D,n as V}from"./index-CJptmEd0.js";import{M as F}from"./Modal-CqpnF6AG.js";const I={class:"mt-3"},N=["value"],$={__name:"ProjectPage",setup(U){const p=C(),m=l([]),s=l(!1),u=l([]),v=l([]);f(()=>{g()});const n=l([{name:"title",placeholder:"Enter project Title",res:""},{name:"instructions",placeholder:"Enter project instructions",res:""}]);f(()=>{i()});async function i(){try{const e=await r.get("/api/projects");if(e.status==200){const t=e.data;m.value=t,console.log(e.data)}}catch(e){console.error("Caught error:",e)}}function b(e){r.delete(`/api/admin/projects/${e}`),i()}function y(e,t){n.value[e].res=t}async function g(){try{const e=await r.get("/api/modules");if(e.status==200){const t=e.data;v.value=t}}catch(e){console.error("Caught error:",e)}}async function j(){try{const e=r.post("/api/admin/projects",{moduleId:u.value,title:n.value[0].res,instructions:n.value[1].res});i(),s.value=!s.value,p.success("Project Created Successfully...")}catch{p.error("Unable to create Project...")}}function x(){s.value=!1}return(e,t)=>{const h=w("Table");return c(),d("div",null,[o("div",null,[s.value?(c(),_(F,{key:0,fields:n.value,onUpdate:y,onClose:x,onSubmit:j},{default:M(()=>[o("div",I,[P(o("select",{"onUpdate:modelValue":t[0]||(t[0]=a=>u.value=a),class:"p-2 border"},[(c(!0),d(S,null,E(v.value,a=>(c(),d("option",{value:a.id},T(a.module_title),9,N))),256))],512),[[B,u.value]])])]),_:1},8,["fields"])):k("",!0)]),o("div",{class:V([s.value?"blur":""])},[o("div",null,[o("button",{onClick:t[1]||(t[1]=a=>s.value=!s.value),class:"bg-blue-500 py-2 text-white block col-start-2 ms-auto w-[200px] rounded"},"Add project"),t[2]||(t[2]=o("div",{class:"flex gap-2 mt-4"},[o("input",{class:"px-4 py-2 rounded-sm flex-1",placeholder:"Enter project Title",type:"text"}),o("button",{class:"px-4 py-2 bg-yellow-500 text-white rounded"},"Search")],-1)),t[3]||(t[3]=o("select",{class:"px-4 py-2 mt-2 border rounded-sm"},[o("option",null,"Latest"),o("option",null,"Active"),o("option",null,"Inactive")],-1))]),D(h,{onDelete:b,items:m.value},null,8,["items"])],2)])}}};export{$ as default};
