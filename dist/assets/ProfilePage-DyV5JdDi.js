import{d as s,y,m as x,l as b,c as i,o as d,i as f,a as l,t as c,p as g,v,x as h,z as k}from"./index-luTevwiG.js";const P={key:0,class:"bg-green-500 p-4 m-5 text-white absolute w-[300px] top-0 right-0 rounded shadow"},U={key:1,class:"bg-red-500 p-4 m-5 text-white absolute w-[300px] top-0 right-0 rounded shadow"},V={type:"submit",class:"w-full flex gap-4 justify-center py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition"},_={key:0,width:"20",src:h,alt:"spinner"},E={__name:"ProfilePage",setup(B){const o=s(""),r=s("");s("");const u=s(!1),a=s(""),p=s("");y(a,()=>{console.log("There is an error"),setTimeout(()=>{a.value=""},5e3)}),x(()=>m());async function m(){try{const t=await b.get("/api/student/me");if(t.status==200){const e=await t.data;o.value=e.email,r.value=e.fullname}else throw new Error(data.error)}catch(t){u.value=!1,a.value=t,console.error("Caught error:",t)}}async function w(){u.value=!0;try{(await b.put("/api/student/me",{fullname:r.value,email:o.value})).status==200&&(p.value="profile updated",m())}catch(t){u.value=!1,a.value=t,console.error("Caught error:",t)}}return(t,e)=>(d(),i("div",null,[p.value?(d(),i("div",P,c(p.value),1)):f("",!0),a.value?(d(),i("div",U,c(a.value),1)):f("",!0),l("form",{onSubmit:e[2]||(e[2]=k(n=>w(),["prevent"])),class:"space-y-4 bg-white border-blue-500 p-6 rounded-lg shadow-2xl relative"},[e[6]||(e[6]=l("span",{class:"text-lg"},"Update Profile",-1)),l("div",null,[e[3]||(e[3]=l("label",{class:"block mb-1 text-gray-700"},"Email",-1)),g(l("input",{"onUpdate:modelValue":e[0]||(e[0]=n=>o.value=n),type:"email",disabled:"",class:"w-full px-4 py-3 border border-gray-300 rounded-lg bg-blue-50 focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[v,o.value]])]),l("div",null,[e[4]||(e[4]=l("label",{class:"block mb-1 text-gray-700"},"Fullname",-1)),g(l("input",{"onUpdate:modelValue":e[1]||(e[1]=n=>r.value=n),type:"text",class:"w-full px-4 py-3 border border-gray-300 rounded-lg bg-blue-50 focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[v,r.value]])]),l("button",V,[e[5]||(e[5]=l("span",null,"Update Profile",-1)),u.value?(d(),i("img",_)):f("",!0)])],32)]))}};export{E as default};
