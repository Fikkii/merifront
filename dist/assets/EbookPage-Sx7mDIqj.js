import{d as u,x,m as E,l as S,c as r,o as n,a as o,k as g,i as b,p as T,v as C,q as P,y as M,F as f,r as _,t as c,z as V}from"./index-Doh7Rih5.js";import"./EbookRecommender.vue_vue_type_style_index_0_scoped_ea196149_lang-l0sNRNKZ.js";const B={class:"flex items-center gap-2"},D={class:"flex gap-2 flex-wrap justify-center"},F=["onClick"],L={key:0,class:"mt-4 text-gray-600"},N={key:1,class:"mt-4 text-red-600"},$={key:2,class:"mt-8 space-y-6 text-left"},A={class:"text-sm font-semibold text-blue-800 mb-2"},I={class:"text-gray-700 mb-2"},K=["onClick"],R={class:"mt-3"},j=["href"],H={__name:"EbookPage",setup(q){const i=u("programming"),p=u(!1),d=u(""),m=u([]),l=u([]),k=["Romance","Fantasy","Strategy","science","Politics","Technology","AI","Programming"],y=s=>{l.value[s]=!l.value[s]},w=(s,e=80)=>s.length>e?s.slice(0,e)+"...":s;let h=null;x(i,s=>{clearTimeout(h),h=setTimeout(()=>{v(s)},1e3)}),E(()=>{v(i.value)});const v=async s=>{let e=`generate ebook on ${s}, never repeat a book twice`;p.value=!0,d.value="",m.value=[],l.value=[];try{const t=await S.post("/api/ebooks/recommendations",{prompt:e}),a=await t.data;if(!t.status==200)throw new Error(a.error||"API Error");m.value=a.cards,l.value=a.cards.map(()=>!1)}catch(t){d.value=t.message}finally{p.value=!1}};return(s,e)=>(n(),r("div",null,[o("div",null,[e[2]||(e[2]=g(" Search for Ebook ")),o("div",B,[T(o("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>i.value=t),onKeydown:e[1]||(e[1]=P(M(()=>{},["prevent","stop"]),["enter"])),class:"border border-gray-300 rounded px-4 py-2 w-full focus:ring focus:border-blue-400",placeholder:"Enter a topic (e.g. 'Machine Learning')"},null,544),[[C,i.value]])])]),e[4]||(e[4]=g(" Popular Tags: ")),o("div",D,[(n(),r(f,null,_(k,t=>o("button",{onClick:a=>i.value=t,class:"p-2 bg-green-800 rounded text-white"},c(t),9,F)),64))]),p.value?(n(),r("div",L,e[3]||(e[3]=[o("img",{src:V,width:"20"},null,-1),g("Loading...")]))):b("",!0),d.value?(n(),r("div",N,c(d.value),1)):b("",!0),m.value.length?(n(),r("div",$,[(n(!0),r(f,null,_(m.value,(t,a)=>(n(),r("div",{key:a,class:"border p-5 rounded shadow hover:shadow-md transition bg-white"},[o("h2",A,c(t.title),1),o("p",I,c(l.value[a]?t.description:w(t.description)),1),o("button",{class:"text-sm text-blue-500 hover:underline",onClick:z=>y(a)},c(l.value[a]?"See less":"See more"),9,K),o("div",R,[o("a",{href:t.link,target:"_blank",rel:"noopener noreferrer",class:"inline-block bg-blue-100 text-blue-700 px-3 py-1 rounded hover:bg-blue-200 transition text-sm"}," ðŸ“¥ Search & Download ",8,j)])]))),128)),o("button",{onClick:v,class:"bg-blue-500 p-3 text-white rounded block ms-auto"},"See more")])):b("",!0)]))}};export{H as default};
