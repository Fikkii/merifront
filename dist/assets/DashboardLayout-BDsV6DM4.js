import{_ as p,c as u,o as n,a as t,F as S,r as j,b as s,w as c,n as L,t as R,u as h,R as N,d as b,e as g,f as P,g as $,h as x,i as _,j as V,k as i,l as D}from"./index-Doh7Rih5.js";import{_ as E}from"./logo-BMUeAq7L.js";const B={class:"sticky bg-white flex gap-3 items-center justify-evenly py-7 border-t shadow-2xl border-gray-500 h-7 w-screen bottom-0 left-0"},I={class:"flex items-center justify-evenly w-full"},T={class:"text-gray-500 text-sm"},z={__name:"DashNav",setup(f){const r=[{title:"Home",name:"dashboard-home",icon:"ri-home-line"},{title:"Course",name:"learning",icon:"ri-donut-chart-line"},{title:"Ebook",name:"ebooks",icon:"ri-book-shelf-line"},{title:"profile",name:"profile",icon:"ri-user-line"}];return(m,a)=>(n(),u("div",B,[t("div",I,[(n(),u(S,null,j(r,d=>s(h(N),{to:{name:d.name},class:"text-2xl flex flex-col items-center"},{default:c(()=>[t("i",{class:L([d.icon])},null,2),t("span",T,R(d.title),1)]),_:2},1032,["to"])),64))])]))}},F=p(z,[["__scopeId","data-v-e1bf2831"]]),H={class:"sticky z-999 top-0 left-0 bg-white py-3 px-4 flex justify-between relative items-center"},O={key:0,class:"bg-white translate-y-[100%] rounded shadow-2xl w-40 absolute bottom-0 right-0"},J={class:"flex rounded flex-col justify-stretch"},M={__name:"Header",setup(f){const r=b(!1),m=g(),a=P(),w=$().role,y=()=>{r.value=!r.value};function k(){localStorage.removeItem("jwt-token"),localStorage.removeItem("user-role"),m.push({name:"login"})}async function v(){try{const o=await D.get("/api/student/me");if(o.status==200)return(await o.data).email;throw a.error("Server Error, Please contact support"),new Error(data.error)}catch(o){console.error("Caught error:",o)}}async function C(){try{const o=await v(),e=await fetch("https://apigateway.merilearn.com.ng/api/auth/forgot-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:o})}),l=await e.json();if(e.ok)a.success("Password reset link sent, Check your email");else throw new Error(l.error)}catch(o){a.error(o.message)}}return(o,e)=>{const l=x("RouterLink");return n(),u("header",H,[r.value?(n(),u("div",O,[t("div",J,[s(l,{to:{name:"profile"},class:"block text-center w-full p-2 border-b border-gray-200"},{default:c(()=>e[0]||(e[0]=[t("i",{class:"ri-user-2-line text-lg mr-3"},null,-1),i("Profile")])),_:1,__:[0]}),h(w)!=="student"?(n(),V(l,{key:0,to:{name:"role"},class:"block text-center w-full p-2 border-b border-gray-200"},{default:c(()=>e[1]||(e[1]=[t("i",{class:"ri-restart-line text-lg mr-3"},null,-1),i("Switch Role")])),_:1,__:[1]})):_("",!0),t("button",{onClick:C,to:{name:"home"},class:"w-full p-2 border-b border-gray-200 mr-3"},e[2]||(e[2]=[t("i",{class:"ri-key-2-line text-lg"},null,-1),i(" Change Password")])),t("button",{onClick:k,class:"w-full p-2 border-b border-gray-200"},e[3]||(e[3]=[t("i",{class:"ri-logout-box-line text-lg mr-3"},null,-1),i(" Logout")]))])])):_("",!0),s(l,{to:{name:"dashboard-home"},class:"flex flex-col items-center"},{default:c(()=>[s(l,{to:{name:"dashboard-home"},class:"text-2xl font-bold text-blue-600 flex gap-2"},{default:c(()=>e[4]||(e[4]=[t("img",{width:"30",src:E},null,-1),i(" Merilearn")])),_:1,__:[4]})]),_:1}),t("div",{class:"text-right block"},[t("button",{onClick:y},e[5]||(e[5]=[t("i",{class:"ri-menu-3-fill text-xl"},null,-1)]))])])}}},U={class:"min-h-screen max-w-screen flex flex-col bg-gray-50"},q={__name:"DashboardLayout",setup(f){return g(),b(!0),(r,m)=>{const a=x("RouterView");return n(),u("div",U,[s(M),s(a,{class:"flex-1 px-6 py-12"}),s(F,{class:"md:hidden"})])}}},K=p(q,[["__scopeId","data-v-30043ba4"]]);export{K as default};
